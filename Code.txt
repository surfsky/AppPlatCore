                    <f:Form ID="Form3" ShowBorder="false" ShowHeader="false" LabelAlign="Right">
                        <Rows>
                            <f:FormRow>
                                <Items>
                                    <f:label></f:label>
                                </Items>
                            </f:FormRow>
                        </Rows>
                    </f:Form>

                                            <Toolbars>
                            <f:Toolbar ID="Toolbar1">
                                <Items>
                                    <f:Button ID="btnEdit" Icon="Pencil" Text="编辑" Enabled="@Model.PowerCoreTitleUserNew">
                                        <Listeners>
                                            <f:Listener Event="click" Handler="onEditClick"></f:Listener>
                                        </Listeners>
                                    </f:Button>
                                </Items>
                            </f:Toolbar>
                        </Toolbars>


                                                                <Listeners>
                                            <f:Listener Event="click" Handler="onDeleteSelectedClick"></f:Listener>
                                        </Listeners>
                                    </f:Button>

                                                                            <Listeners>
                                            <f:Listener Event="click" Handler="onNewClick"></f:Listener>
                                        </Listeners>
                                    </f:Button>


                                            private async Task<IEnumerable<User>> GetTitleUsersAsync(int grid1SelectedRowID)
        {
            var grid2PagingInfo = new PagingInfoViewModel
            {
                SortField = "Name",
                SortDirection = "DESC",
                PageIndex = 0,
                PageSize = ConfigHelper.PageSize
            };
            Grid2PagingInfo = grid2PagingInfo;
            return await GetTitleUsersAsync(grid2PagingInfo, grid1SelectedRowID, String.Empty);
        }


            <f:Panel ID="Panel1" BodyPadding="5" ShowBorder="false" ShowHeader="false" Layout="VBox" Title="部门管理" IsViewPort="true">
        <Items>
            <f:Grid ID="Grid1" BoxFlex="1" ShowBorder="true" ShowHeader="false" EnableCheckBoxSelect="false" DataIDField="ID" DataTextField="Name"
                    EnableSimulateTree="true" DataSource="@Model.Depts">
                <Toolbars>
                    <f:Toolbar ID="Toolbar1" Position="Top">
                        <Items>
                            <f:Button ID="btnNew" Icon="Add" Text="新增部门" Enabled="@Model.PowerCoreDeptNew">
                                <Listeners>
                                    <f:Listener Event="click" Handler="onNewClick"></f:Listener>
                                </Listeners>
                            </f:Button>
                        </Items>
                    </f:Toolbar>
                </Toolbars>
                <Columns>
                    <f:RowNumberField EnablePagingNumber="true"></f:RowNumberField>
                    <f:RenderField EnableColumnHide="false" EnableHeaderMenu="false" Width="50" RendererFunction="renderActionEdit"></f:RenderField>
                    <f:RenderField EnableColumnHide="false" EnableHeaderMenu="false" Width="50" RendererFunction="renderActionDelete"></f:RenderField>
                    <f:RenderField For="Depts.First().Name" SortField="Name" DataSimulateTreeLevelField="TreeLevel" Width="180"></f:RenderField>
                    <f:RenderField For="Depts.First().Remark" SortField="Remark" ExpandUnusedSpace="true"></f:RenderField>
                    <f:RenderField For="Depts.First().SortIndex" Width="80"></f:RenderField>
                </Columns>
            </f:Grid>
        </Items>
    </f:Panel>


                <f:Form ID="Form2" ShowBorder="false" ShowHeader="false">
                <Rows>
                    <f:FormRow ID="FormRow1">
                        <Items>
                            <f:RadioButtonList ID="rblEnableStatus" OnSelectedIndexChanged="@Url.Handler("UserList_DoPostBack")" OnSelectedIndexChangedFields="Panel1" Label="启用状态" ColumnNumber="3">
                                <Items>
                                    <f:RadioItem Text="全部" Selected="true" Value="all"></f:RadioItem>
                                    <f:RadioItem Text="启用" Value="enabled"></f:RadioItem>
                                    <f:RadioItem Text="禁用" Value="disabled"></f:RadioItem>
                                </Items>
                            </f:RadioButtonList>
                            <f:TwinTriggerBox ID="ttbSearchMessage" ShowLabel="false" EmptyText="在用户名称中搜索" Trigger1Icon="Clear" Trigger2Icon="Search"
                                              ShowTrigger1="false" OnTrigger2Click="@Url.Handler("UserList_DoPostBack")" OnTrigger2ClickParameter1="@(new Parameter("actionType","trigger2",ParameterMode.String))" OnTrigger2ClickFields="Panel1"
                                              OnTrigger1Click="@Url.Handler("UserList_DoPostBack")" OnTrigger1ClickParameter1="@(new Parameter("actionType","trigger1",ParameterMode.String))" OnTrigger1ClickFields="Panel1">
                            </f:TwinTriggerBox>
                        </Items>
                    </f:FormRow>
                </Rows>
            </f:Form>


                                                <f:Button ID="btnEdit" Icon="Pencil" Text="编辑" Enabled="@Model.PowerCoreDeptView" OnClientClick="onEditClick">
                                        <Listeners>
                                            <f:Listener Event="click" Handler="onEditClick"></f:Listener>
                                        </Listeners>
                                    </f:Button>


                                                            <Listeners>
                            <f:Listener Event="click" Handler="F.activeWindow.hide();"></f:Listener>
                        </Listeners>
                    </f:Button>


        public IActionResult OnPostMenu_Window1_Close(string[] Grid1_fields)
        {
            MenuHelper.Reload();
            UIHelper.Grid("Grid1").DataSource(MenuHelper.Menus, Grid1_fields);

            return UIHelper.Result();
        }




                                            <f:TwinTriggerBox ID="ttbSearchMessage" ShowLabel="false" EmptyText="搜索" Trigger1Icon="Clear" Trigger2Icon="Search" ShowTrigger1="false"
                                        OnClientTrigger1Click="RoleUser_Grid2_DoPostBack('trigger1');"
                                        OnClientTrigger2Click="RoleUser_Grid2_DoPostBack('trigger2');" 
                                        />
                                        <Listeners>
                                            <f:Listener Event="trigger1click" Handler="RoleUser_Grid2_DoPostBack('trigger1');"></f:Listener>
                                            <f:Listener Event="trigger2click" Handler="RoleUser_Grid2_DoPostBack('trigger2');"></f:Listener>
                                        </Listeners>
                                    </f:TwinTriggerBox>


                                                                        <f:MenuButton ID="btnEnableUsers" Text="启用" onclick="onEnableUsersClick();" />
                                        <Listeners>
                                            <f:Listener Event="click" Handler="onEnableUsersClick"></f:Listener>
                                        </Listeners>
                                    </f:MenuButton>

                                                                        <f:MenuButton ID="btnDisableUsers" Text="禁用" onclick="onDisableUsersClick(); " />
                                        <Listeners>
                                            <f:Listener Event="click" Handler="onDisableUsersClick"></f:Listener>
                                        </Listeners>
                                    </f:MenuButton>


                                                                <f:Tool IconFont="_Refresh" CssClass="tabtool" ToolTip="刷新" ID="toolRefresh" OnClientClick="onToolRefreshClick();">
                                <Listeners>
                                    <f:Listener Event="click" Handler="onToolRefreshClick"></f:Listener>
                                </Listeners>
                            </f:Tool>
                            <f:Tool IconFont="_Maximize" CssClass="tabtool" ToolTip="最大化" ID="toolMaximize">
                                <Listeners>
                                    <f:Listener Event="click" Handler="onToolMaximizeClick"></f:Listener>
                                </Listeners>
                            </f:Tool>


                            ID="b
                            
                                                <f:Button CssClass="userpicaction" Text="@Model.UserName" IconFont="UserCircle"  IconAlign="Top" ShowMenuIcon="true" EnableDefaultState="false" EnableDefaultCorner="false">
tnUserName" 


public void OnGetAsync()
        {
            // 注销退出
            var action = Asp.GetQueryString("action");
            if (action == "SignOut")
            {
                HttpContext.SignOut();
                HttpContext.Session.Clear();
                Response.Redirect("/Login");
                //await OnPostBtnSignOut_ClickAsync();
                return;
            }


            // 用户菜单
            List<Models.Menu> menus = ResolveUserMenuList();
            if (menus.Count == 0)
            {
                UI.ShowNotify("系统管理员尚未给你配置菜单！");
                return;
            }
            MenuTreeNodes = GetTreeNodes(menus).ToArray();

            //
            UserName = GetIdentityName();
            OnlineUserCount = (await GetOnlineCountAsync()).ToString();
            ProductVersion = Common.GetProductVersion();
            ConfigTitle = ConfigHelper.Title;   //"AppPlat";
            SystemHelpMenu = GetSystemHelpMenu();
        }